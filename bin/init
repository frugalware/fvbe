#!/bin/sh

error()
{
  echo "$1"
  halt
  exit 1
}

ROOT="/root"
PATH="/sbin:/usr/sbin:/bin:/usr/bin"

export PATH

if ! test -c /dev/zero; then
	mount -t devtmpfs none /dev
	test "$?" -ne 0 && error "Failed to mount /dev"
fi

if ! test -d /sys/kernel; then
	mount -t sysfs none /sys
	test "$?" -ne 0 && error "Failed to mount /sys"
fi

if ! test -d /proc/self; then
  mount -t proc none /proc
	test "$?" -ne 0 && error "Failed to mount /proc"
fi

if ! test -d "$ROOT"; then
	mkdir -p -m 0755 "$ROOT"
	test "$?" -ne 0 && error "Failed to create $ROOT"
fi

bash

halt
